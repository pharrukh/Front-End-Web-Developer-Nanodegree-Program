(()=>{"use strict";var e={149:(e,t,n)=>{n.r(t),n.d(t,{calculateDuration:()=>r});const o=n(470);function r(e,t){return o(t).diff(o(e),"days")+1}},376:e=>{e.exports=require("axios")},473:e=>{e.exports=require("body-parser")},479:e=>{e.exports=require("cors")},334:e=>{e.exports=require("dotenv")},127:e=>{e.exports=require("express")},470:e=>{e.exports=require("moment")},622:e=>{e.exports=require("path")}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{require("core-js/modules/es.promise");const e=n(127),t=n(479),o=n(473),{get:r}=n(376),s=n(334),{calculateDuration:a}=n(149),{join:i}=n(622),d={to:null,from:null,destination:null,result:null},u=e();s.config();const l=process.env.GEONAMES_USERNAME,c=process.env.WEATHERBIT_KEY,p=process.env.PIXABAY_KEY;async function m(e){return(await r(`https://pixabay.com/api/?key=${p}&q=${e}`)).data.hits[0].webformatURL}async function f(e,t){const n=(await r(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${e}&lon=${t}&key=${c}`)).data.data.map((e=>e.temp)).reduce(((e,t)=>(e+t)/2));return Math.round(n)}u.use(o.urlencoded({extended:!0})),u.use(o.json()),u.use(t()),u.use(e.static("/dist")),u.get("/",(function(e,t){t.sendFile(i(__dirname,"index.html"))})),u.get("/index.css",(function(e,t){t.sendFile(__dirname+"/index.css")})),u.get("/index.js",(function(e,t){t.sendFile(__dirname+"/index.js")})),u.post("/process",(async(e,t)=>{const{from:n,to:o,destination:s}=e.body;if(function(e,t,n){return d.to===t&&d.from===e&&d.destination===n}(n,o,s))t.send(d.result);else{const{townName:e,lng:i,lat:u}=await async function(e){const t=`http://api.geonames.org/geoCodeAddressJSON?q=${e}&username=${l}`,n=await r(t),o=n.data.address.adminName2,{lng:s,lat:a}=n.data.address;return{townName:o,lng:s,lat:a}}(s),c={duration:a(n,o),townName:e,averageTemp:await f(u,i),imageUrl:await m(e)};!function(e,t,n,o){d.to=t,d.from=e,d.destination=n,d.result=o}(n,o,s,c),t.send(c)}})),u.listen(3e3,(()=>{console.log("Example app listening at http://localhost:3000")}))})()})();