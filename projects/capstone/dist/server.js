(()=>{"use strict";var e={149:(e,t,o)=>{o.r(t),o.d(t,{calculateDuration:()=>n});const r=o(470);function n(e,t){return r(t).diff(r(e),"days")+1}},376:e=>{e.exports=require("axios")},473:e=>{e.exports=require("body-parser")},479:e=>{e.exports=require("cors")},334:e=>{e.exports=require("dotenv")},127:e=>{e.exports=require("express")},470:e=>{e.exports=require("moment")}},t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{require("core-js/modules/es.promise");const e=o(127),t=o(479),r=o(473),{get:n}=o(376),a=o(334),{calculateDuration:s}=o(149),i={to:null,from:null,destination:null,result:null},u=e();a.config();const l=process.env.GEONAMES_USERNAME,d=process.env.WEATHERBIT_KEY,c=process.env.PIXABAY_KEY;async function p(e){return(await n(`https://pixabay.com/api/?key=${c}&q=${e}`)).data.hits[0].webformatURL}async function m(e,t){const o=(await n(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${e}&lon=${t}&key=${d}`)).data.data.map((e=>e.temp)).reduce(((e,t)=>(e+t)/2));return Math.round(o)}u.use(r.urlencoded({extended:!0})),u.use(r.json()),u.use(t()),u.use(e.static("../../dist")),u.post("/process",(async(e,t)=>{const{from:o,to:r,destination:a}=e.body;if(function(e,t,o){return i.to===t&&i.from===e&&i.destination===o}(o,r,a))t.send(i.result);else{const{townName:e,lng:u,lat:d}=await async function(e){const t=`http://api.geonames.org/geoCodeAddressJSON?q=${e}&username=${l}`,o=await n(t),r=o.data.address.adminName2,{lng:a,lat:s}=o.data.address;return{townName:r,lng:a,lat:s}}(a),c={duration:s(o,r),townName:e,averageTemp:await m(d,u),imageUrl:await p(e)};!function(e,t,o,r){i.to=t,i.from=e,i.destination=o,i.result=r}(o,r,a,c),t.send(c)}})),u.listen(3e3,(()=>{console.log("Example app listening at http://localhost:3000")}))})()})();