(()=>{var t={376:t=>{"use strict";t.exports=require("axios")},473:t=>{"use strict";t.exports=require("body-parser")},479:t=>{"use strict";t.exports=require("cors")},334:t=>{"use strict";t.exports=require("dotenv")},127:t=>{"use strict";t.exports=require("express")},470:t=>{"use strict";t.exports=require("moment")}},e={};function s(r){if(e[r])return e[r].exports;var n=e[r]={exports:{}};return t[r](n,n.exports,s),n.exports}(()=>{const t=s(127),e=s(479),r=s(473),{get:n}=s(376),a=s(334),o=s(470),i={to:null,from:null,destination:null,result:null},u=t();a.config();const c=process.env.GEONAMES_USERNAME,d=process.env.WEATHERBIT_KEY,p=process.env.PIXABAY_KEY;async function l(t){return(await n(`https://pixabay.com/api/?key=${p}&q=${t}`)).data.hits[0].webformatURL}async function m(t,e){const s=(await n(`https://api.weatherbit.io/v2.0/forecast/daily?lat=${t}&lon=${e}&key=${d}`)).data.data.map((t=>t.temp)).reduce(((t,e)=>(t+e)/2));return Math.round(s)}function f(t,e){return o(e).diff(o(t),"days")+1}u.use(r.urlencoded({extended:!0})),u.use(r.json()),u.use(e()),u.use(t.static("../../dist")),u.post("/process",(async(t,e)=>{const{from:s,to:r,destination:a}=t.body;if(function(t,e,s){return i.to===e&&i.from===t&&i.destination===s}(s,r,a))e.send(i.result);else{const{townName:t,lng:o,lat:u}=await async function(t){const e=`http://api.geonames.org/geoCodeAddressJSON?q=${t}&username=${c}`,s=await n(e),r=s.data.address.adminName2,{lng:a,lat:o}=s.data.address;return{townName:r,lng:a,lat:o}}(a),d={duration:f(s,r),townName:t,averageTemp:await m(u,o),imageUrl:await l(t)};!function(t,e,s,r){i.to=e,i.from=t,i.destination=s,i.result=r}(s,r,a,d),e.send(d)}})),u.listen(3e3,(()=>{console.log("Example app listening at http://localhost:3000")}))})()})();